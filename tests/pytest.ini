[pytest]
# Pytest configuration for Marker OCR API

# Test discovery patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test paths
testpaths = /tests

# Minimum version
minversion = 7.0

# Markers for test organization
markers =
    unit: Fast unit tests without external dependencies (< 100ms)
    integration: Integration tests with real services
    api: API endpoint tests requiring running server
    ml: Tests requiring ML models (Marker)
    slow: Slow-running tests (> 5s)
    manual: Manual tests for development/debugging (not run in CI)
    e2e: End-to-end tests with full workflow
    modelfree: Tests without ML dependencies
    fullstack: Tests with full ML stack

# Output options
addopts =
    -v
    --strict-markers
    --tb=short
    --color=yes
    --code-highlight=yes

# Coverage options (when --cov is used)
# addopts = --cov=app --cov-report=html --cov-report=term-missing

# Asyncio configuration
asyncio_mode = auto

# Logging
log_cli = false
log_cli_level = INFO
# log_file disabled when using read-only volumes
# log_file = /app/test-results/pytest.log
log_file_level = DEBUG

# Performance
# Number of processes for parallel execution (use with pytest-xdist)
# addopts = -n auto

# Ignore patterns
norecursedirs = .git .tox dist build *.egg __pycache__ node_modules

